(this.webpackJsonp501v2=this.webpackJsonp501v2||[]).push([[0],{274:function(e,t,n){},280:function(e,t,n){},282:function(e,t,n){},285:function(e,t,n){},298:function(e,t){},327:function(e,t){},329:function(e,t){},340:function(e,t){},342:function(e,t){},369:function(e,t){},370:function(e,t){},375:function(e,t){},377:function(e,t){},384:function(e,t){},403:function(e,t){},428:function(e,t,n){},429:function(e,t,n){},430:function(e,t,n){},431:function(e,t,n){},432:function(e,t,n){"use strict";n.r(t);var c=n(2),r=n.n(c),a=n(51),i=n.n(a),o=(n(274),n(62)),u=n(445),s=n(441),l=(n(280),n(11)),d=function(e){return Object(l.jsx)(o.a,{children:function(t){var n=t.location;return Object(l.jsx)(u.a,{className:"transition-group",children:Object(l.jsx)(s.a,{classNames:"fade",timeout:500,children:Object(l.jsx)(o.c,{location:n,children:e.children})},n.key)})}})},f=function(e){return e.children},b=n(27),j=n(439),v=n(444),p=n(226),O=n(443),h=(n(282),function(e){var t=Object(O.a)({item:e.item,collect:function(e){return{isDragging:!!e.isDragging()}}}),n=Object(b.a)(t,3),c=n[0].isDragging,r=n[1],a=n[2];return Object(l.jsxs)("div",{id:e.item.id,ref:a,className:"card",style:{display:c&&e.hideSourceOnDrag?"none":"flex",opacity:c?.5:1,top:e.item.y,left:e.item.x},children:[Object(l.jsx)("div",{className:"flex justify-end p-3",children:Object(l.jsx)("div",{ref:r,id:"".concat(e.item.id,"-drag-handle"),className:"card-drag-handle"})}),e.children]})}),x="card",m="collection",y=n(442),g=n(35),w=n.n(g),C=n(43),k=n(63),N=(n(284),n(285),n(45)),E=n(440),R=n(14),S=n(15),T=n(19),_=n(20),D=n(10),I=function(e){Object(T.a)(n,e);var t=Object(_.a)(n);function n(e){var c;return Object(R.a)(this,n),(c=t.call(this,e)).addHandler("onClick",(function(e,t){return window.open(t.href),!0})),c}return Object(S.a)(n,[{key:"createInputRules",value:function(){return[Object(D.P)({regexp:/(?<!!)\[(.*?)\]\((.*?)\)/,type:this.type,getAttributes:function(e){var t=Object(b.a)(e,3);t[0];return{text:t[1],href:t[2]}}})]}},{key:"createPasteRules",value:function(){return[]}}]),n}(N.h),M=function(e){Object(T.a)(n,e);var t=Object(_.a)(n);function n(){return Object(R.a)(this,n),t.apply(this,arguments)}return Object(S.a)(n,[{key:"createInputRules",value:function(){return[Object(D.R)({regexp:/!\[(.+?)\]\((.+?)\)/,type:this.type,getAttributes:function(e){var t=Object(b.a)(e,3),n=(t[0],t[1]);return{src:t[2],alt:n}}})]}}]),n}(N.f),A=Object(c.forwardRef)((function(e,t){var n,r=Object(c.useCallback)((function(e){var t=e.json,n=e.invalidContent;return e.transformers.remove(t,n)}),[]),a=Object(E.c)({extensions:function(){return[new N.b({}),new N.g,new N.a,new I({defaultTarget:"_blank",autoLink:!0}),new N.e({}),new N.c({}),new N.i,new N.j,new M({enableResizing:!0}),new N.d]},onError:r,content:null===(n=e.state)||void 0===n?void 0:n.doc}),i=a.manager,o=a.state,u=a.setState,s=a.getContext;return Object(c.useImperativeHandle)(t,(function(){return s()}),[s]),Object(l.jsx)("div",{className:"remirror-theme",children:Object(l.jsx)(E.b,{manager:i,initialContent:o,onChange:function(t){var n;u(t.state),null===(n=e.onChange)||void 0===n||n.call(e,t)},onFocus:function(t,n){var c;null===(c=e.onFocus)||void 0===c||c.call(e,t,n)},onBlur:function(t,n){var c;null===(c=e.onBlur)||void 0===c||c.call(e,t,n)},children:Object(l.jsx)(E.a,{})})})})),F=n(124),V=n(223),B=n.n(V),P=n(225),L=n.n(P);F.a.plugin(B.a),F.a.plugin(L.a);var X=new F.a("notes");X.search({fields:["title","text"],build:!0}).then((function(){return console.log("Index created succesfully")})).catch((function(e){return console.log("ERROR failed to build index")}));var J={type:"doc",content:[{type:"paragraph"}]};function H(e){return U.apply(this,arguments)}function U(){return(U=Object(C.a)(w.a.mark((function e(t){var n,c;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.id||t._id,e.next=4,X.upsert(n,(function(e){return t}));case 4:return c=e.sent,e.abrupt("return",c);case 8:e.prev=8,e.t0=e.catch(0),console.log("ERROR: couldn't update \n".concat(e.t0));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function Y(e,t,n,c,r,a){return $.apply(this,arguments)}function $(){return($=Object(C.a)(w.a.mark((function e(t,n,c,r,a,i){var o,u;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o={_id:t||Object(y.a)(),title:n||null,meta:c||{},state:r||J,createdTime:a||Date.now(),lastEditedTime:i||Date.now()},e.next=4,X.putIfNotExists(o);case 4:return u=e.sent,e.abrupt("return",u);case 8:e.prev=8,e.t0=e.catch(0),console.log("ERROR: couldn't create doc ".concat(e.t0));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function q(){return z.apply(this,arguments)}function z(){return(z=Object(C.a)(w.a.mark((function e(){var t,n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,X.allDocs({include_docs:!0});case 3:return n=e.sent,e.abrupt("return",null===n||void 0===n||null===(t=n.rows)||void 0===t?void 0:t.map((function(e){return e.doc})));case 7:e.prev=7,e.t0=e.catch(0),console.log("ERROR fetching all notes \n".concat(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function W(e){return G.apply(this,arguments)}function G(){return(G=Object(C.a)(w.a.mark((function e(t){var n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,X.get(t);case 3:return n=e.sent,e.abrupt("return",n);case 7:e.prev=7,e.t0=e.catch(0),console.log("ERROR fetching  ".concat(t," \n").concat(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function K(e){X.changes({since:"now",live:!0}).on("change",(function(){return e()}))}function Q(){return(Q=Object(C.a)(w.a.mark((function e(t){var n,c=arguments;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:["title","text"],e.abrupt("return",null===X||void 0===X?void 0:X.search({query:t,fields:n,include_docs:!0}).then((function(e){return e})).catch((function(e){return console.log("Search failed ".concat(e))})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Z=n(38),ee=n(17),te=n(96),ne=n(156),ce=n.n(ne),re="ADD_ITEM_TO_CANVAS",ae="REMOVE_ITEM_FROM_CANVAS",ie="UPDATE_ITEM_POSITION",oe={id:"randomID",title:"Main Canvas",items:[]},ue=window.__REDUX_DEVTOOLS_EXTENSION__||te.a,se=Object(te.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{openCanvas:oe},t=arguments.length>1?arguments[1]:void 0,n=t.type,c=t.payload;switch(n){case re:var r=e.openCanvas.items;return r.find((function(e){return e.id===(null===c||void 0===c?void 0:c.id)}))||(e.openCanvas.items=ce()(r,{$push:[c]})),e;case ae:return e.openCanvas.items=e.openCanvas.items.filter((function(e){return e.id!==(null===c||void 0===c?void 0:c.id)})),e;case ie:var a=e.openCanvas.items.find((function(e){return e.id===(null===c||void 0===c?void 0:c.id)}));if(!a)return e;var i=e.openCanvas.items.indexOf(a);return e.openCanvas.items=ce()(e.openCanvas.items,Object(ee.a)({},i,{$merge:Object(k.a)({},c)})),e;default:return e}}),ue()),le="SET_NOTE",de="SET_NOTE_STATE",fe="NEW_NOTE",be=function(e,t){var n=t.type,c=t.payload;switch(n){case le:return c;case fe:var r=Date.now();return Object(k.a)(Object(k.a)({},c),{},{createdTime:r,lastEditedTime:r});case de:return Object(k.a)(Object(k.a)({},e),{},{state:c,lastEditedTime:Date.now()})}},je=function(e){var t=Object(c.useReducer)(be,e.note),n=Object(b.a)(t,2),r=n[0],a=n[1],i=Object(Z.b)(),o=Object(c.useState)(!1),u=Object(b.a)(o,2),s=(u[0],u[1]),d=Object(c.useRef)(),f=Object(c.useCallback)(Object(C.a)(w.a.mark((function t(){var n,c,r;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.id){t.next=14;break}return t.next=3,W(e.id);case 3:if(!(n=t.sent)){t.next=8;break}a({type:le,payload:n}),t.next=12;break;case 8:return t.next=10,Y(e.id);case 10:c=t.sent,a({type:fe,payload:c});case 12:t.next=18;break;case 14:return t.next=16,Y();case 16:r=t.sent,a({type:fe,payload:r});case 18:case"end":return t.stop()}}),t)}))),[e.id]);Object(c.useEffect)((function(){f()}),[f]);var j=Object(c.useCallback)((function(e){a({type:de,payload:e.state.toJSON()})}),[]),v=Object(c.useCallback)((function(e,t){r.text=d.current.getState().doc.textContent,H(r),s(!1)}),[r]);return r?Object(l.jsxs)("div",{className:"w-full md:w-5/12 lg:w-1/3 shadow-lg rounded-lg p-5 lg:mr-4 mb-4",children:[Object(l.jsxs)("div",{className:"flex justify-between",children:[Object(l.jsx)("textarea",{placeholder:"Title",defaultValue:null===r||void 0===r?void 0:r.title,className:"font-medium text-3xl w-11/12",onChange:function(e){var t=e.target.value;t.replace(/\n/,""),r.title=t,H(r)},wrap:"soft"}),Object(l.jsx)("button",{className:"h-4 w-4 rounded-full bg-red-300 hover:bg-red-500",onClick:function(){return i({type:ae,payload:r})}})]}),Object(l.jsx)(A,{state:r.state,onChange:j,onBlur:v,onFocus:function(){return s(!0)},ref:d})]}):null},ve=(n(428),function(e){var t=Object(c.useState)([]),n=Object(b.a)(t,2),r=n[0],a=n[1],i=Object(c.useCallback)(Object(C.a)(w.a.mark((function e(){var t;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q();case 2:t=e.sent,a(t);case 4:case"end":return e.stop()}}),e)}))),[a]);return Object(c.useEffect)((function(){i(),K(i)}),[i]),Object(l.jsx)("div",{className:"flex w-64 flex-col rounded items-center divide-y divide-gray-200 divide-opacity-50",children:r.map((function(t,n){var c,r=(null===t||void 0===t||null===(c=t.state)||void 0===c?void 0:c.doc)?t.text:"";return Object(l.jsx)("button",{className:"truncate w-full transition duration-250 ease-in-out bg-gradient-to-r hover:from-gray-100 hover:to-gray-200",onClick:function(){e.handleNoteButtonClick(t)},children:t.title||r},n)}))})});var pe=function(){return Object(l.jsx)(j.a,{backend:p.a,children:Object(l.jsx)(Oe,{})})},Oe=function(e){var t=Object(c.useState)({x:0,y:0}),n=Object(b.a)(t,2),r=(n[0],n[1]),a=Object(c.useState)({x:0,y:0}),i=Object(b.a)(a,2),o=i[0],u=i[1],s=Object(Z.c)((function(e){return e.openCanvas.items})),d=Object(Z.b)(),f=Object(v.a)({accept:[x,m],drop:function(e,t){var n=t.getDifferenceFromInitialOffset(),c=Math.round(e.x+n.x),r=Math.round(e.y+n.y);return e.type===x?O(e.id,c,r):u({x:c,y:r}),{x:c,y:r}}}),j=Object(b.a)(f,2)[1],p=Object(c.useCallback)((function(e,t){var n={type:x,id:Object(y.a)(),x:e,y:t};d({type:re,payload:n})}),[d]),O=Object(c.useCallback)((function(e,t,n){d({type:ie,payload:{id:e,x:t,y:n}})}),[d]);return Object(l.jsxs)("div",{className:"canvas",ref:j,onMouseMove:function(e){r({x:e.nativeEvent.offsetX,y:e.nativeEvent.offsetY})},onDoubleClick:function(e){p(e.nativeEvent.offsetX,e.nativeEvent.offsetY)},children:[!1,Object(l.jsx)(h,{item:{type:m,id:Object(y.a)(),x:o.x,y:o.y},children:Object(l.jsx)(ve,{handleNoteButtonClick:function(e){var t={id:null===e||void 0===e?void 0:e.id,type:x,x:690,y:320};d({type:re,payload:t})}})}),Object.entries(s).map((function(e,t){var n=Object(b.a)(e,2),c=(n[0],n[1]);return Object(l.jsx)(h,{item:c,hideSourceOnDrag:!0,children:Object(l.jsx)(je,{id:c.id})},t)}))]})},he=n(120);n(429);function xe(){var e,t=Object(c.useState)(!1),n=Object(b.a)(t,2),r=(n[0],n[1]),a=Object(c.useState)(""),i=Object(b.a)(a,2),o=i[0],u=i[1],s=Object(c.useState)(),d=Object(b.a)(s,2),f=d[0],j=d[1],v=function(e){(function(e){return Q.apply(this,arguments)})(e).then((function(e){return j(e)}))},p=Object(Z.b)();return Object(l.jsxs)("div",{className:"relative",children:[Object(l.jsxs)("div",{className:"h-14 w-80 border border-black rounded-full flex justify-between pl-6 items-center relative",children:[Object(l.jsx)("input",{placeholder:"Search",className:"w-3/4 h-full bg-transparent overflow-ellipsis",type:"text",value:o,onChange:function(e){var t=e.target.value;u(t),v(t)},onFocus:function(e){return r(!0)},onBlur:function(e){return r(!1)}}),Object(l.jsx)("button",{className:"h-14 w-14 rounded-full bg-black text-white flex justify-center items-center",children:Object(l.jsx)(he.b,{})})]}),""!==o&&(null===f||void 0===f?void 0:f.total_rows)>0&&Object(l.jsx)("div",{className:"search-results border border-black border-t-0 rounded-b-lg overflow-hidden",children:null===f||void 0===f||null===(e=f.rows)||void 0===e?void 0:e.map((function(e,t){var n;return Object(l.jsx)("button",{className:"result",onClick:function(t){!function(e){var t={id:null===e||void 0===e?void 0:e.id,type:x,x:690,y:320};p({type:re,payload:t})}(e.doc),u("")},children:null!==(n=e.doc.title)&&void 0!==n?n:e.doc.title},t)}))})]})}function me(){return Object(l.jsxs)("div",{className:"min-h-screen",children:[Object(l.jsx)("div",{id:"top-bar",className:"flex flex-row-reverse p-8",children:Object(l.jsx)(xe,{})}),Object(l.jsx)(pe,{})]})}function ye(e){var t=Object(Z.b)(),n=Object(c.useCallback)((function(){var e={type:x,id:Object(y.a)(),x:0,y:0};t({type:re,payload:e})}),[t]);return Object(l.jsx)("button",{onClick:function(){var t;n(),null===e||void 0===e||null===(t=e.handleClick)||void 0===t||t.call(e)},className:"rounded-full h-16 w-16 fixed right-8 bottom-8 bg-black text-white flex justify-center items-center shadow-md hover:pointer",children:Object(l.jsx)(he.a,{})})}n(430);function ge(){var e=Object(Z.c)((function(e){return e.openCanvas.items}));Object(Z.b)();return Object(l.jsxs)("div",{className:"min-h-screen",children:[Object(l.jsx)("div",{id:"top-bar",className:"hidden md:flex flex-row-reverse p-8",children:Object(l.jsx)(xe,{})}),Object(l.jsx)("div",{className:"editor-list sibling-fade",children:e.map((function(e,t){return Object(l.jsx)(je,{id:e.id},t)}))}),Object(l.jsx)(ye,{})]})}function we(){var e=Object(c.useState)([]),t=Object(b.a)(e,2),n=t[0],r=t[1],a=Object(o.d)(),i=(Object(Z.c)((function(e){return e.openCanvas.items})),Object(Z.b)()),u=Object(c.useCallback)(Object(C.a)(w.a.mark((function e(){var t;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q();case 2:t=e.sent,r(t);case 4:case"end":return e.stop()}}),e)}))),[r]);return Object(c.useEffect)((function(){u(),K(u)}),[u]),Object(l.jsx)("div",{className:"min-h-screen",children:Object(l.jsxs)("div",{className:"h-full w-full rounded-lg divide-y divide-gray-200",children:[n.map((function(e,t){var n,c=(null===e||void 0===e||null===(n=e.state)||void 0===n?void 0:n.doc)?e.text:"";return Object(l.jsx)("button",{className:"truncate w-full transition duration-250 ease-in-out bg-gradient-to-r hover:from-gray-100 hover:to-gray-200",onClick:function(){!function(e){var t={id:null===e||void 0===e?void 0:e.id,type:x,x:690,y:320};i({type:re,payload:t})}(e),a("/experiment-501.V2/p")},children:e.title||c||"Empty"},t)})),Object(l.jsx)(ye,{handleClick:function(){return a("/experiment-501.V2/p")}})]})})}function Ce(){return Object(l.jsx)("div",{className:"min-h-screen",children:Object(l.jsx)("div",{id:"top-bar",className:"flex flex-row-reverse p-8",children:Object(l.jsx)(xe,{})})})}function ke(e){return Object(l.jsxs)(d,{children:[Object(l.jsx)(o.b,{from:"/",to:"experiment-501.V2",noThrow:!0}),Object(l.jsxs)(f,{path:"/experiment-501.V2",children:[Object(l.jsx)(me,{path:"/c"}),Object(l.jsx)(ge,{path:"/p"}),Object(l.jsx)(Ce,{path:"/demo"}),Object(l.jsx)(we,{path:"/"})]})]})}n(431);var Ne=function(){return Object(l.jsx)("div",{className:"App",children:Object(l.jsx)(Z.a,{store:se,children:Object(l.jsx)(ke,{})})})},Ee=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,446)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),c(e),r(e),a(e),i(e)}))};i.a.render(Object(l.jsx)(r.a.StrictMode,{children:Object(l.jsx)(Ne,{})}),document.getElementById("root")),Ee()}},[[432,1,2]]]);
//# sourceMappingURL=main.1ad8a796.chunk.js.map