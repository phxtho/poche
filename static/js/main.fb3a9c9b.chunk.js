(this.webpackJsonp501v2=this.webpackJsonp501v2||[]).push([[0],{295:function(e,t,n){},300:function(e,t,n){},302:function(e,t,n){},305:function(e,t,n){},318:function(e,t){},347:function(e,t){},349:function(e,t){},360:function(e,t){},362:function(e,t){},389:function(e,t){},390:function(e,t){},395:function(e,t){},397:function(e,t){},404:function(e,t){},423:function(e,t){},455:function(e,t,n){},456:function(e,t,n){},457:function(e,t,n){},458:function(e,t,n){},459:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=459},480:function(e,t,n){},481:function(e,t,n){"use strict";n.r(t);var c=n(3),r=n.n(c),a=n(50),o=n.n(a),i=(n(295),n(56)),s=n(494),l=n(490),u=(n(300),n(8)),d=function(e){return Object(u.jsx)(i.a,{children:function(t){var n=t.location;return Object(u.jsx)(s.a,{className:"transition-group",children:Object(u.jsx)(l.a,{classNames:"fade",timeout:500,children:Object(u.jsx)(i.c,{location:n,children:e.children})},n.key)})}})},f=function(e){return e.children},j=n(27),b=n(488),h=n(493),v=n(247),p=n(492),O=(n(302),function(e){var t=Object(p.a)({item:e.item,collect:function(e){return{isDragging:!!e.isDragging()}}}),n=Object(j.a)(t,3),c=n[0].isDragging,r=n[1],a=n[2];return Object(u.jsxs)("div",{id:e.item.id,ref:a,className:"card",style:{display:c&&e.hideSourceOnDrag?"none":"flex",opacity:c?.5:1,top:e.item.y,left:e.item.x},children:[Object(u.jsx)("div",{className:"flex justify-end p-3",children:Object(u.jsx)("div",{ref:r,id:"".concat(e.item.id,"-drag-handle"),className:"card-drag-handle"})}),e.children]})}),x="card",m="collection",g=n(491),w=n(32),y=n.n(w),C=n(41),N=n(67),k=(n(304),n(305),n(46)),E=n(489),R=n(15),S=n(16),T=n(20),_=n(21),D=n(12),I=function(e){Object(T.a)(n,e);var t=Object(_.a)(n);function n(e){var c;return Object(R.a)(this,n),(c=t.call(this,e)).addHandler("onClick",(function(e,t){return window.open(t.href),!0})),c}return Object(S.a)(n,[{key:"createInputRules",value:function(){return[Object(D.P)({regexp:function(){try{return new RegExp("?<!!)[(.*?)]((.*?))")}catch(e){return/[^!]\[(.+?)\]\((.+?)\)/}}(),type:this.type,getAttributes:function(e){var t=Object(j.a)(e,3);t[0];return{text:t[1],href:t[2]}}})]}},{key:"createPasteRules",value:function(){return[]}}]),n}(k.h),A=function(e){Object(T.a)(n,e);var t=Object(_.a)(n);function n(){return Object(R.a)(this,n),t.apply(this,arguments)}return Object(S.a)(n,[{key:"createInputRules",value:function(){return[Object(D.R)({regexp:/!\[(.+?)\]\((.+?)\)/,type:this.type,getAttributes:function(e){var t=Object(j.a)(e,3),n=(t[0],t[1]);return{src:t[2],alt:n}}})]}}]),n}(k.f),F=Object(c.forwardRef)((function(e,t){var n,r=Object(c.useCallback)((function(e){var t=e.json,n=e.invalidContent;return e.transformers.remove(t,n)}),[]),a=Object(E.c)({extensions:function(){return[new k.b({}),new k.g,new k.a,new I({defaultTarget:"_blank",autoLink:!0}),new k.e({}),new k.c({}),new k.i,new k.j,new A({enableResizing:!0}),new k.d]},onError:r,content:null===(n=e.state)||void 0===n?void 0:n.doc}),o=a.manager,i=a.state,s=a.setState,l=a.getContext;return Object(c.useImperativeHandle)(t,(function(){return l()}),[l]),Object(u.jsx)("div",{className:"remirror-theme",children:Object(u.jsx)(E.b,{manager:o,initialContent:i,onChange:function(t){var n;s(t.state),null===(n=e.onChange)||void 0===n||n.call(e,t)},onFocus:function(t,n){var c;null===(c=e.onFocus)||void 0===c||c.call(e,t,n)},onBlur:function(t,n){var c;null===(c=e.onBlur)||void 0===c||c.call(e,t,n)},children:Object(u.jsx)(E.a,{})})})})),M=n(128),V=n(241),q=n.n(V),B=n(243),W=n.n(B);M.a.plugin(q.a),M.a.plugin(W.a);var P=new M.a("notes");P.search({fields:["title","text"],build:!0}).then((function(){return console.log("Index created succesfully")})).catch((function(e){return console.log("ERROR failed to build index")}));var U={type:"doc",content:[{type:"paragraph"}]};function L(e){return H.apply(this,arguments)}function H(){return(H=Object(C.a)(y.a.mark((function e(t){var n,c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.id||t._id,e.next=4,P.upsert(n,(function(e){return t}));case 4:return c=e.sent,e.abrupt("return",c);case 8:e.prev=8,e.t0=e.catch(0),console.log("ERROR: couldn't update \n".concat(e.t0));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function X(e,t,n,c,r,a){return J.apply(this,arguments)}function J(){return(J=Object(C.a)(y.a.mark((function e(t,n,c,r,a,o){var i,s;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i={_id:t||Object(g.a)(),title:n||null,meta:c||{},state:r||U,createdTime:a||Date.now(),lastEditedTime:o||Date.now()},e.next=4,P.putIfNotExists(i);case 4:return s=e.sent,e.abrupt("return",s);case 8:e.prev=8,e.t0=e.catch(0),console.log("ERROR: couldn't create doc ".concat(e.t0));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function $(){return($=Object(C.a)(y.a.mark((function e(t){var n,c,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.id||t._id,e.next=4,P.get(n).then((function(e){return e._rev}));case 4:return c=e.sent,e.next=7,P.remove(n,c);case 7:return r=e.sent,e.abrupt("return",r);case 11:e.prev=11,e.t0=e.catch(0),console.log("ERROR: couldn't delete \n".concat(e.t0));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function z(){return G.apply(this,arguments)}function G(){return(G=Object(C.a)(y.a.mark((function e(){var t,n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.allDocs({include_docs:!0});case 3:return n=e.sent,e.abrupt("return",null===n||void 0===n||null===(t=n.rows)||void 0===t?void 0:t.map((function(e){return e.doc})));case 7:e.prev=7,e.t0=e.catch(0),console.log("ERROR fetching all notes \n".concat(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function Y(e){return Q.apply(this,arguments)}function Q(){return(Q=Object(C.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.get(t);case 3:return n=e.sent,e.abrupt("return",n);case 7:e.prev=7,e.t0=e.catch(0),console.log("ERROR fetching  ".concat(t," \n").concat(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function K(e){P.changes({since:"now",live:!0}).on("change",(function(){return e()}))}function Z(){return(Z=Object(C.a)(y.a.mark((function e(t){var n,c=arguments;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:["title","text"],e.abrupt("return",null===P||void 0===P?void 0:P.search({query:t,fields:n,include_docs:!0}).then((function(e){return e})).catch((function(e){return console.log("Search failed ".concat(e))})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ee=n(39),te=n(18),ne=n(101),ce=n(165),re=n.n(ce),ae="ADD_ITEM_TO_CANVAS",oe="REMOVE_ITEM_FROM_CANVAS",ie="UPDATE_ITEM_POSITION",se={id:"randomID",title:"Main Canvas",items:[]},le=window.__REDUX_DEVTOOLS_EXTENSION__||ne.a,ue=Object(ne.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{openCanvas:se},t=arguments.length>1?arguments[1]:void 0,n=t.type,c=t.payload;switch(n){case ae:var r=e.openCanvas.items;return r.find((function(e){return e.id===(null===c||void 0===c?void 0:c.id)}))||(e.openCanvas.items=re()(r,{$push:[c]})),e;case oe:return e.openCanvas.items=e.openCanvas.items.filter((function(e){return e.id!==(null===c||void 0===c?void 0:c.id)})),e;case ie:var a=e.openCanvas.items.find((function(e){return e.id===(null===c||void 0===c?void 0:c.id)}));if(!a)return e;var o=e.openCanvas.items.indexOf(a);return e.openCanvas.items=re()(e.openCanvas.items,Object(te.a)({},o,{$merge:Object(N.a)({},c)})),e;default:return e}}),le()),de=n(130),fe=n(166),je=n.n(fe),be={content:{borderRadius:".5rem",height:"fit-content"}},he=function(e){je.a.setAppElement("#root");var t=Object(ee.b)();return Object(u.jsx)(je.a,{isOpen:e.isOpen,onAfterClose:e.onAfterOpen,onRequestClose:e.onRequestClose,style:be,children:Object(u.jsxs)("div",{children:[Object(u.jsx)("h1",{className:"text-center mb-2",children:"actions"}),Object(u.jsxs)("div",{className:"flex flex-col space-y-4",children:[Object(u.jsxs)("button",{className:"w-full h-16 rounded-lg shadow-md hover:shadow-lg hover:bg-gray-200",onClick:function(){return e.onRequestClose()},children:[Object(u.jsx)(de.b,{className:"mx-auto"})," Properties"]}),Object(u.jsxs)("button",{className:"w-full h-16 rounded-lg shadow-md hover:shadow-lg hover:bg-gray-200",onClick:function(){return e.onRequestClose()},children:[Object(u.jsx)(de.a,{className:"mx-auto"})," Download"]}),Object(u.jsxs)("button",{className:"w-full h-16 rounded-lg shadow-md bg-red-500 text-white hover:shadow-lg hover:bg-red-600",onClick:function(){t({type:oe,payload:{id:e.note.id}}),function(e){$.apply(this,arguments)}(e.note),e.onRequestClose()},children:[Object(u.jsx)(de.c,{className:"mx-auto"})," Delete"]})]})]})})},ve="SET_NOTE",pe="SET_NOTE_STATE",Oe="NEW_NOTE",xe=function(e,t){var n=t.type,c=t.payload;switch(n){case ve:return c;case Oe:var r=Date.now();return Object(N.a)(Object(N.a)({},c),{},{createdTime:r,lastEditedTime:r});case pe:return Object(N.a)(Object(N.a)({},e),{},{state:c,lastEditedTime:Date.now()})}},me=function(e){var t=Object(c.useReducer)(xe,e.note),n=Object(j.a)(t,2),r=n[0],a=n[1],o=Object(ee.b)(),i=Object(c.useState)(!1),s=Object(j.a)(i,2),l=(s[0],s[1]),d=Object(c.useState)(!1),f=Object(j.a)(d,2),b=f[0],h=f[1],v=Object(c.useRef)(),p=Object(c.useCallback)(Object(C.a)(y.a.mark((function t(){var n,c,r;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.id){t.next=14;break}return t.next=3,Y(e.id);case 3:if(!(n=t.sent)){t.next=8;break}a({type:ve,payload:n}),t.next=12;break;case 8:return t.next=10,X(e.id);case 10:c=t.sent,a({type:Oe,payload:c});case 12:t.next=18;break;case 14:return t.next=16,X();case 16:r=t.sent,a({type:Oe,payload:r});case 18:case"end":return t.stop()}}),t)}))),[e.id]);Object(c.useEffect)((function(){p()}),[p]);var O=Object(c.useCallback)((function(e){a({type:pe,payload:e.state.toJSON()})}),[]),x=Object(c.useCallback)((function(e,t){r.text=v.current.getState().doc.textContent,L(r),l(!1)}),[r]);return r?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("div",{className:"w-full md:w-5/12 lg:w-1/3 shadow-lg rounded-lg p-5 lg:mr-4 mb-4",children:[Object(u.jsxs)("div",{className:"flex justify-between",children:[Object(u.jsx)("textarea",{placeholder:"Title",defaultValue:null===r||void 0===r?void 0:r.title,className:"font-medium text-3xl w-11/12",onChange:function(e){var t=e.target.value;t.replace(/\n/,""),r.title=t,L(r)},wrap:"soft"}),Object(u.jsxs)("div",{className:"flex space-x-2",children:[Object(u.jsx)("button",{className:"h-4 w-4 rounded-full bg-green-300 hover:bg-green-500",onClick:function(){return h(!0)}}),Object(u.jsx)("button",{className:"h-4 w-4 rounded-full bg-red-300 hover:bg-red-500",onClick:function(){return o({type:oe,payload:r})}})]})]}),Object(u.jsx)(F,{state:r.state,onChange:O,onBlur:x,onFocus:function(){return l(!0)},ref:v})]}),Object(u.jsx)(he,{isOpen:b,note:r,onRequestClose:function(){h(!1)}})]}):null},ge=(n(455),function(e){var t=Object(c.useState)([]),n=Object(j.a)(t,2),r=n[0],a=n[1],o=Object(c.useCallback)(Object(C.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z();case 2:t=e.sent,a(t);case 4:case"end":return e.stop()}}),e)}))),[a]);return Object(c.useEffect)((function(){o(),K(o)}),[o]),Object(u.jsx)("div",{className:"flex w-64 flex-col rounded items-center divide-y divide-gray-200 divide-opacity-50",children:r.map((function(t,n){var c,r=(null===t||void 0===t||null===(c=t.state)||void 0===c?void 0:c.doc)?t.text:"";return Object(u.jsx)("button",{className:"truncate w-full transition duration-250 ease-in-out bg-gradient-to-r hover:from-gray-100 hover:to-gray-200",onClick:function(){e.handleNoteButtonClick(t)},children:t.title||r},n)}))})});var we=function(){return Object(u.jsx)(b.a,{backend:v.a,children:Object(u.jsx)(ye,{})})},ye=function(e){var t=Object(c.useState)({x:0,y:0}),n=Object(j.a)(t,2),r=(n[0],n[1]),a=Object(c.useState)({x:0,y:0}),o=Object(j.a)(a,2),i=o[0],s=o[1],l=Object(ee.c)((function(e){return e.openCanvas.items})),d=Object(ee.b)(),f=Object(h.a)({accept:[x,m],drop:function(e,t){var n=t.getDifferenceFromInitialOffset(),c=Math.round(e.x+n.x),r=Math.round(e.y+n.y);return e.type===x?p(e.id,c,r):s({x:c,y:r}),{x:c,y:r}}}),b=Object(j.a)(f,2)[1],v=Object(c.useCallback)((function(e,t){var n={type:x,id:Object(g.a)(),x:e,y:t};d({type:ae,payload:n})}),[d]),p=Object(c.useCallback)((function(e,t,n){d({type:ie,payload:{id:e,x:t,y:n}})}),[d]);return Object(u.jsxs)("div",{className:"canvas",ref:b,onMouseMove:function(e){r({x:e.nativeEvent.offsetX,y:e.nativeEvent.offsetY})},onDoubleClick:function(e){v(e.nativeEvent.offsetX,e.nativeEvent.offsetY)},children:[!1,Object(u.jsx)(O,{item:{type:m,id:Object(g.a)(),x:i.x,y:i.y},children:Object(u.jsx)(ge,{handleNoteButtonClick:function(e){var t={id:null===e||void 0===e?void 0:e.id,type:x,x:690,y:320};d({type:ae,payload:t})}})}),Object.entries(l).map((function(e,t){var n=Object(j.a)(e,2),c=(n[0],n[1]);return Object(u.jsx)(O,{item:c,hideSourceOnDrag:!0,children:Object(u.jsx)(me,{id:c.id})},t)}))]})},Ce=n(79);n(456);function Ne(){var e,t=Object(c.useState)(!1),n=Object(j.a)(t,2),r=(n[0],n[1]),a=Object(c.useState)(""),o=Object(j.a)(a,2),i=o[0],s=o[1],l=Object(c.useState)(),d=Object(j.a)(l,2),f=d[0],b=d[1],h=function(e){(function(e){return Z.apply(this,arguments)})(e).then((function(e){return b(e)}))},v=Object(ee.b)();return Object(u.jsxs)("div",{className:"relative",children:[Object(u.jsxs)("div",{className:"h-14 w-80 border border-black rounded-full flex justify-between pl-6 items-center relative",children:[Object(u.jsx)("input",{placeholder:"Search",className:"w-3/4 h-full bg-transparent overflow-ellipsis",type:"text",value:i,onChange:function(e){var t=e.target.value;s(t),h(t)},onFocus:function(e){return r(!0)},onBlur:function(e){return r(!1)}}),Object(u.jsx)("button",{className:"h-14 w-14 rounded-full bg-black text-white flex justify-center items-center",children:Object(u.jsx)(Ce.c,{})})]}),""!==i&&(null===f||void 0===f?void 0:f.total_rows)>0&&Object(u.jsx)("div",{className:"search-results border border-black border-t-0 rounded-b-lg overflow-hidden",children:null===f||void 0===f||null===(e=f.rows)||void 0===e?void 0:e.map((function(e,t){var n;return Object(u.jsx)("button",{className:"result",onClick:function(t){!function(e){var t={id:null===e||void 0===e?void 0:e.id,type:x,x:690,y:320};v({type:ae,payload:t})}(e.doc),s("")},children:null!==(n=e.doc.title)&&void 0!==n?n:e.doc.title},t)}))})]})}function ke(){return Object(u.jsxs)("div",{className:"min-h-screen",children:[Object(u.jsx)("div",{id:"top-bar",className:"flex flex-row-reverse p-8",children:Object(u.jsx)(Ne,{})}),Object(u.jsx)(we,{})]})}function Ee(e){var t=Object(ee.b)(),n=Object(c.useCallback)((function(){var e={type:x,id:Object(g.a)(),x:0,y:0};t({type:ae,payload:e})}),[t]);return Object(u.jsx)("button",{onClick:function(){var t;n(),null===e||void 0===e||null===(t=e.handleClick)||void 0===t||t.call(e)},className:"rounded-full h-16 w-16 fixed right-8 bottom-8 bg-black text-white flex justify-center items-center shadow-md hover:pointer",children:Object(u.jsx)(Ce.a,{})})}n(457);function Re(){var e=Object(ee.c)((function(e){return e.openCanvas.items})),t=Object(i.d)();return Object(c.useEffect)((function(){0==e.length&&t("/experiment-501.V2")}),[e,t]),Object(u.jsxs)("div",{className:"min-h-screen",children:[Object(u.jsx)("div",{id:"top-bar",className:"hidden md:flex flex-row-reverse p-8",children:Object(u.jsx)(Ne,{})}),Object(u.jsx)("div",{className:"editor-list",children:e.map((function(e,t){return Object(u.jsx)(me,{id:e.id},t)}))}),Object(u.jsx)(Ee,{})]})}n(458);function Se(){var e=Object(c.useState)([]),t=Object(j.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(!1),o=Object(j.a)(a,2),s=o[0],l=o[1],d=Object(c.useState)(),f=Object(j.a)(d,2),b=f[0],h=f[1],v=Object(i.d)(),p=Object(ee.c)((function(e){return e.openCanvas.items})),O=Object(ee.b)(),m=Object(c.useCallback)(Object(C.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z();case 2:t=e.sent,r(t);case 4:case"end":return e.stop()}}),e)}))),[r]);return Object(c.useEffect)((function(){return m(),K(m),function(){r([])}}),[m]),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{className:"min-h-screen max-w-full",children:Object(u.jsxs)("div",{className:"p-5",children:[Object(u.jsxs)("table",{className:"rounded-lg divide-y divide-gray-200 note-list shadow-md",children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{className:"w-11/12 lg:w-9/12",children:"Note"}),Object(u.jsx)("th",{className:"hidden lg:block w-2/12",children:"Edited"}),Object(u.jsx)("th",{className:"w-1/12"})]})}),Object(u.jsx)("tbody",{children:n.sort((function(e,t){return e.lastEditedTime<t.lastEditedTime?1:-1})).map((function(e,t){var n;(null===e||void 0===e||null===(n=e.state)||void 0===n?void 0:n.doc)&&e.text;return Object(u.jsxs)("tr",{id:"row-".concat(e.id),children:[Object(u.jsx)("td",{children:Object(u.jsx)("button",{className:"truncate w-full transition duration-250 ease-in-out bg-gradient-to-r hover:from-gray-100 hover:to-gray-200",onClick:function(){!function(e){var t={id:null===e||void 0===e?void 0:e.id,type:x,x:690,y:320};O({type:ae,payload:t})}(e),v("/experiment-501.V2/p")},children:Object(u.jsxs)("div",{className:"flex flex-col text-left",children:[Object(u.jsxs)("div",{className:"font-medium flex space-x-1",children:[Object(u.jsx)("span",{children:e.title||"No Title"}),Object(u.jsx)("span",{className:"rounded-full h-2 w-2 bg-green-500 ".concat(p.find((function(t){return t.id==e.id}))?"inline":"hidden"," ")})]}),Object(u.jsx)("span",{className:"text-sm text-gray-500 font-light",children:e.text||"empty"})]})})}),Object(u.jsx)("td",{className:"hidden md:block",children:new Date(e.lastEditedTime).toLocaleString()}),Object(u.jsx)("td",{children:Object(u.jsx)("button",{onClick:function(){return function(e){h(e),l(!0)}(e)},children:Object(u.jsx)(Ce.b,{})})})]},t)}))})]}),Object(u.jsx)(Ee,{handleClick:function(){return v("/experiment-501.V2/p")}})]})}),Object(u.jsx)(he,{isOpen:s,note:b,onRequestClose:function(){h(null),l(!1)}})]})}var Te=n(244),_e=n.n(Te),De=function(){function e(){var t=this;Object(R.a)(this,e),this.id=void 0,this.peer=void 0,this.dataConnection=void 0,this.id=localStorage.getItem("peerId"),this.peer=new _e.a(this.id),this.peer.on("open",(function(e){localStorage.setItem("peerId",e),console.log("My peer ID is: "+e)})),this.peer.on("connection",(function(e){console.log("Connected to ".concat(e.peer)),t.dataConnection=e,e.on("data",(function(e){console.log("Recieved data from ".concat(t.dataConnection.peer)),console.log(e),Array.isArray(e)&&e.forEach((function(e){return L(e)}))}))})),this.peer.on("error",(function(e){console.error(e)}))}return Object(S.a)(e,[{key:"Connect",value:function(e){this.dataConnection=this.peer.connect(e,{serialization:"json"}),console.log("Connected to ".concat(this.dataConnection.peer))}},{key:"Replicate",value:function(){var e=Object(C.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z();case 3:t=e.sent,this.dataConnection.send(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),Ie=n(245),Ae=n.n(Ie),Fe=n(246),Me=n.n(Fe);function Ve(){var e,t,n=Object(c.useState)(""),r=Object(j.a)(n,2),a=r[0],o=r[1],i=Object(c.useState)(),s=Object(j.a)(i,2),l=(s[0],s[1]),d=Object(c.useState)(),f=Object(j.a)(d,2),b=f[0],h=f[1];Object(c.useEffect)((function(){h(new De);var n=document.getElementById("qrcode");Ae.a.toCanvas(n,localStorage.getItem("peerId")),t=document.getElementById("outputCanvas"),e=document.getElementById("video"),navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}).then((function(t){e.srcObject=t,e.setAttribute("playsinline",!0),e.play()}))}),[]);return requestAnimationFrame((function n(){if(e&&e.readyState===e.HAVE_ENOUGH_DATA){var c=t.getContext("2d");t.height=e.videoHeight,t.width=e.videoWidth,c.drawImage(e,0,0,t.width,t.height);var r=c.getImageData(0,0,t.width,t.height),a=Me()(r.data,r.width,r.height,{inversionAttempts:"dontInvert"});a&&(console.log("Got QR Code"),console.log(a.data),o(a.data))}requestAnimationFrame(n)})),Object(u.jsxs)("div",{className:"min-h-screen",children:[Object(u.jsx)("div",{id:"top-bar",className:"flex flex-row-reverse p-8",children:Object(u.jsx)(Ne,{})}),Object(u.jsxs)("div",{className:"flex",children:[Object(u.jsxs)("div",{className:"flex flex-col",children:[Object(u.jsx)("input",{className:"border border-black",type:"text",value:a,onChange:function(e){o(e.target.value)}}),Object(u.jsx)("button",{className:"rounded bg-blue-500 text-white",onClick:function(e){b.Connect(a)},children:"Connect"})]}),Object(u.jsxs)("div",{className:"flex flex-col",children:[Object(u.jsx)("textarea",{className:"border border-black",onChange:function(e){l(e.target.value)}}),Object(u.jsx)("button",{className:"bg-green-500 text-white rounded",onClick:function(e){b.Replicate()},children:"Send"})]})]}),Object(u.jsx)("canvas",{id:"qrcode"}),Object(u.jsx)("canvas",{id:"outputCanvas",hidden:!0}),Object(u.jsx)("video",{id:"video"})]})}function qe(e){return Object(u.jsxs)(d,{children:[Object(u.jsx)(i.b,{from:"/",to:"experiment-501.V2",noThrow:!0}),Object(u.jsxs)(f,{path:"/experiment-501.V2",children:[Object(u.jsx)(ke,{path:"/c"}),Object(u.jsx)(Re,{path:"/p"}),Object(u.jsx)(Ve,{path:"/demo"}),Object(u.jsx)(Se,{path:"/"})]})]})}n(480);var Be=function(){return Object(u.jsx)("div",{className:"App",children:Object(u.jsx)(ee.a,{store:ue,children:Object(u.jsx)(qe,{})})})},We=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,495)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),c(e),r(e),a(e),o(e)}))},Pe=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Ue(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}o.a.render(Object(u.jsx)(r.a.StrictMode,{children:Object(u.jsx)(Be,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/experiment-501.V2",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/experiment-501.V2","/service-worker.js");Pe?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var c=n.headers.get("content-type");404===n.status||null!=c&&-1===c.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Ue(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):Ue(t,e)}))}}(),We()}},[[481,1,2]]]);
//# sourceMappingURL=main.fb3a9c9b.chunk.js.map