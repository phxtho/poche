(this.webpackJsonp501v2=this.webpackJsonp501v2||[]).push([[0],{199:function(e,t,n){},204:function(e,t,n){},206:function(e,t,n){},209:function(e,t,n){},224:function(e,t){},239:function(e,t,n){},243:function(e,t,n){},244:function(e,t,n){},245:function(e,t,n){},246:function(e,t,n){},247:function(e,t,n){},248:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=248},273:function(e,t,n){},274:function(e,t,n){"use strict";n.r(t);var c,r,a,i,o=n(2),s=n.n(o),u=n(49),l=n.n(u),d=(n(199),n(34)),j=n(24),b=n(35),f=n(287),h=n(283),O=(n(204),n(4)),x=function(e){return Object(O.jsx)(b.a,{children:function(t){var n=t.location;return Object(O.jsx)(f.a,{className:"transition-group",children:Object(O.jsx)(h.a,{classNames:"fade",timeout:500,children:Object(O.jsx)(b.c,{location:n,children:e.children})},n.key)})}})},v=n(282),m=n(286),p=n(149),g=n(285),w=(n(206),function(e){var t=Object(g.a)({item:e.item,collect:function(e){return{isDragging:!!e.isDragging()}}}),n=Object(j.a)(t,3),c=n[0].isDragging,r=n[1],a=n[2];return Object(O.jsxs)("div",{id:e.item.id,ref:a,className:"card",style:{display:c&&e.hideSourceOnDrag?"none":"flex",opacity:c?.5:1,top:e.item.y,left:e.item.x},children:[Object(O.jsx)("div",{className:"flex justify-end p-3",children:Object(O.jsx)("div",{ref:r,id:"".concat(e.item.id,"-drag-handle"),className:"card-drag-handle"})}),e.children]})}),y="card",k="collection",C=n(284),N=n(26),R=n.n(N),E=n(30),S=(n(208),n(209),n(42)),I=n(150),A=n(11),D=n(14),F=n(18),T=n(19),q=n(13),M=function(e){Object(F.a)(n,e);var t=Object(T.a)(n);function n(e){var c;return Object(A.a)(this,n),(c=t.call(this,e)).addHandler("onClick",(function(e,t){return window.open(t.href),!0})),c}return Object(D.a)(n,[{key:"createInputRules",value:function(){return[Object(q.O)({regexp:function(){try{return new RegExp("?<!!)[(.*?)]((.*?))")}catch(e){return/[^!]\[(.+?)\]\((.+?)\)/}}(),type:this.type,getAttributes:function(e){var t=Object(j.a)(e,3);t[0];return{text:t[1],href:t[2]}}})]}},{key:"createPasteRules",value:function(){return[]}}]),n}(S.h),B=function(e){Object(F.a)(n,e);var t=Object(T.a)(n);function n(){return Object(A.a)(this,n),t.apply(this,arguments)}return Object(D.a)(n,[{key:"createInputRules",value:function(){return[Object(q.Q)({regexp:/!\[(.+?)\]\((.+?)\)/,type:this.type,getAttributes:function(e){var t=Object(j.a)(e,3),n=(t[0],t[1]);return{src:t[2],alt:n}}})]}}]),n}(S.f),L=B,_=n(137),V=n(10),W=n(6),P=n(53),U=n(46),H=n(76),G=(n(212),n(213),c=Object(V.extension)({defaultOptions:{}}),r=Object(V.command)(),c((i=function(e){Object(F.a)(n,e);var t=Object(T.a)(n);function n(){return Object(A.a)(this,n),t.apply(this,arguments)}return Object(D.a)(n,[{key:"name",get:function(){return"math_inline"}},{key:"createTags",value:function(){return[W.c.InlineNode]}},{key:"createNodeSpec",value:function(e,t){return Object(d.a)(Object(d.a)({group:"inline math",content:"text*",inline:!0,atom:!0},t),{},{attrs:Object(d.a)({},e.defaults()),parseDOM:[{tag:"math-inline"}],toDOM:function(){return["math-inline",{class:"math-node"},0]}})}},{key:"createInputRules",value:function(){return[Object(H.c)(H.a,this.type)]}},{key:"createExternalPlugins",value:function(){return[H.e]}},{key:"createKeymap",value:function(e){return{Backspace:Object(q.a)(Object(P.b)(U.c),Object(P.b)(H.d),Object(P.b)(U.d),Object(P.b)(U.e))}}},{key:"insertMathInline",value:function(){var e=this;return function(t){return Object(H.b)(e.type),null}}}]),n}(V.NodeExtension),Object(_.a)(i.prototype,"insertMathInline",[r],Object.getOwnPropertyDescriptor(i.prototype,"insertMathInline"),i.prototype),a=i))||a),Q=Object(o.forwardRef)((function(e,t){var n,c=Object(o.useCallback)((function(e){var t=e.json,n=e.invalidContent;return e.transformers.remove(t,n)}),[]),r=Object(I.f)({extensions:function(){return[new S.b({}),new S.g,new S.a,new M({defaultTarget:"_blank",autoLink:!0}),new S.e({}),new S.c({}),new S.i,new S.j,new L({enableResizing:!0}),new S.d,new S.k,new G]},onError:c,content:null===(n=e.state)||void 0===n?void 0:n.doc}),a=r.manager,i=r.state,s=r.setState,u=r.getContext;return Object(o.useImperativeHandle)(t,(function(){return u()}),[u]),Object(O.jsx)("div",{className:"remirror-theme",children:Object(O.jsx)(I.b,{manager:a,initialContent:i,onChange:function(t){var n;s(t.state),null===(n=e.onChange)||void 0===n||n.call(e,t)},onFocus:function(t,n){var c;null===(c=e.onFocus)||void 0===c||c.call(e,t,n)},onBlur:function(t,n){var c;null===(c=e.onBlur)||void 0===c||c.call(e,t,n)},children:Object(O.jsx)(I.a,{})})})})),J=n(75),z=n(97),X=n.n(z),Y=n(145);J.a.plugin(X.a);var K=new J.a("notes"),$={type:"doc",content:[{type:"paragraph"}]};function Z(e){return ee.apply(this,arguments)}function ee(){return(ee=Object(E.a)(R.a.mark((function e(t){var n,c;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.id||t._id,e.next=4,K.upsert(n,(function(e){return t}));case 4:return c=e.sent,e.abrupt("return",c);case 8:e.prev=8,e.t0=e.catch(0),console.log("ERROR: couldn't update \n".concat(e.t0));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function te(e,t,n,c,r,a){return ne.apply(this,arguments)}function ne(){return(ne=Object(E.a)(R.a.mark((function e(t,n,c,r,a,i){var o,s;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(o={_id:t||Object(C.a)(),id:null,title:n||null,meta:c||{},state:r||$,createdTime:a||Date.now(),lastEditedTime:i||Date.now()}).id=o._id,e.next=5,K.putIfNotExists(o);case 5:return s=e.sent,e.abrupt("return",s);case 9:e.prev=9,e.t0=e.catch(0),console.log("ERROR: couldn't create doc ".concat(e.t0));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function ce(){return(ce=Object(E.a)(R.a.mark((function e(t){var n,c;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,K.get(t).then((function(e){return e._rev}));case 3:return n=e.sent,e.next=6,K.remove(t,n);case 6:return c=e.sent,e.abrupt("return",c);case 10:e.prev=10,e.t0=e.catch(0),console.log("ERROR: couldn't delete \n".concat(e.t0));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function re(){return ae.apply(this,arguments)}function ae(){return(ae=Object(E.a)(R.a.mark((function e(){var t,n;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,K.allDocs({include_docs:!0});case 3:return n=e.sent,e.abrupt("return",null===n||void 0===n||null===(t=n.rows)||void 0===t?void 0:t.map((function(e){return e.doc})));case 7:e.prev=7,e.t0=e.catch(0),console.log("ERROR fetching all notes \n".concat(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function ie(e){return oe.apply(this,arguments)}function oe(){return(oe=Object(E.a)(R.a.mark((function e(t){var n;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,K.get(t);case 3:return n=e.sent,e.abrupt("return",n);case 7:e.prev=7,e.t0=e.catch(0),console.log("ERROR fetching  ".concat(t," \n").concat(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function se(e){K.changes({since:"now",live:!0}).on("change",(function(){return e()}))}function ue(){return(ue=Object(E.a)(R.a.mark((function e(t){var n,c;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Y.a,e.next=3,re();case 3:return e.t1=e.sent,e.t2={keys:["title","text"],includeMatches:!0,minMatchCharLength:2,includeScore:!0,threshold:.5},n=new e.t0(e.t1,e.t2),c=n.search(t),e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var le=n(117),de=n(55),je=n.n(de),be=n(9),fe={items:[],addItem:function(e,t){fe.items=Oe(e,t)},removeItem:function(e,t){fe.items=he(e,t)}},he=function(e,t){return e.filter((function(e){return e!==t}))},Oe=function(e,t){return e.find((function(e){return e===t}))?e:[].concat(Object(be.a)(e),[t])},xe=s.a.createContext(fe);xe.displayName="NotesContext";var ve=xe,me={content:{borderRadius:".5rem",height:"fit-content",maxWidth:"40rem",marginLeft:"auto",marginRight:"auto"}},pe=function(e){je.a.setAppElement("#root");var t=Object(o.useContext)(ve),n=t.items,c=t.removeItem;return Object(O.jsx)(je.a,{isOpen:e.isOpen,onAfterClose:e.onAfterOpen,onRequestClose:e.onRequestClose,style:me,children:Object(O.jsxs)("div",{children:[Object(O.jsx)("h1",{className:"text-center mb-2",children:"actions"}),Object(O.jsxs)("div",{className:"flex flex-col space-y-4",children:[Object(O.jsxs)("button",{className:"w-full h-16 rounded-lg shadow-md hover:shadow-lg hover:bg-gray-200",onClick:function(){c(n,e.note.id),e.onRequestClose()},children:[Object(O.jsx)(le.b,{className:"mx-auto"})," Close"]}),Object(O.jsxs)("button",{className:"w-full h-16 rounded-lg shadow-md bg-red-500 text-white hover:shadow-lg hover:bg-red-600",onClick:function(){c(n,e.note.id),function(e){ce.apply(this,arguments)}(e.note.id),e.onRequestClose()},children:[Object(O.jsx)(le.a,{className:"mx-auto"})," Delete"]})]})]})})},ge=(n(239),function(e){var t=Object(o.useState)(),n=Object(j.a)(t,2),c=n[0],r=n[1],a=Object(o.useState)(!1),i=Object(j.a)(a,2),s=i[0],u=i[1],l=Object(o.useState)(!1),f=Object(j.a)(l,2),h=f[0],x=f[1],v=Object(o.useRef)(),m=Object(o.useRef)(),p=Object(b.d)(),g=Object(o.useCallback)(Object(E.a)(R.a.mark((function t(){var n;return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.id){t.next=5;break}return t.next=3,ie(e.id);case 3:(n=t.sent)&&r(n);case 5:case"end":return t.stop()}}),t)}))),[e.id]);Object(o.useEffect)((function(){g()}),[g]),Object(o.useEffect)((function(){if(p.hash){var t=p.hash.substring(1);e.id===t&&m.current&&m.current.scrollIntoView({behavior:"smooth"})}}),[p.hash,e.id]);var w=Object(o.useCallback)((function(e){var t=Object(d.a)(Object(d.a)({},c),{},{state:e.state.toJSON(),lastEditedTime:Date.now()});r(t)}),[c]),y=Object(o.useCallback)((function(e,t){c.text=e.helpers.getText(),Z(c),u(!1)}),[c]),k=Object(o.useCallback)((function(t,n){var c;u(!0),null===(c=e.handleFocus)||void 0===c||c.call(e,v.current)}),[e]);return c?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("div",{id:e.id,ref:m,className:"w-full md:w-5/12 lg:w-1/3 shadow-lg rounded-lg p-5 lg:mr-4 mb-4 editor-container",children:[Object(O.jsxs)("div",{className:"flex justify-between",children:[Object(O.jsx)("textarea",{placeholder:"Title",defaultValue:null===c||void 0===c?void 0:c.title,className:"font-semibold text-4xl w-11/12",onChange:function(e){var t=e.target.value;t.replace(/\n/,""),c.title=t,Z(c)},wrap:"soft"}),Object(O.jsx)("div",{className:"flex space-x-2",children:Object(O.jsx)("button",{className:"h-4 w-4 rounded-full border hover:bg-gray-700 hover:border-gray-700 ".concat(s?"border-black bg-black":"border-gray-400"),onClick:function(){return x(!0)}})})]}),Object(O.jsx)(Q,{state:c.state,onChange:w,onBlur:y,onFocus:k,ref:v})]}),Object(O.jsx)(pe,{isOpen:h,note:c,onRequestClose:function(){x(!1)}})]}):null}),we=n(148),ye=(n(243),function(e){var t=Object(o.useState)([]),n=Object(j.a)(t,2),c=n[0],r=n[1],a=Object(o.useCallback)(Object(E.a)(R.a.mark((function e(){var t;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re();case 2:t=e.sent,r(t);case 4:case"end":return e.stop()}}),e)}))),[r]);return Object(o.useEffect)((function(){a(),se(a)}),[a]),Object(O.jsx)("div",{className:"flex w-64 flex-col rounded items-center divide-y divide-gray-200 divide-opacity-50",children:c.map((function(t,n){var c,r=(null===t||void 0===t||null===(c=t.state)||void 0===c?void 0:c.doc)?t.text:"";return Object(O.jsx)("button",{className:"truncate w-full transition duration-250 ease-in-out bg-gradient-to-r hover:from-gray-100 hover:to-gray-200",onClick:function(){e.handleNoteButtonClick(t)},children:t.title||r},n)}))})});var ke=function(){return Object(O.jsx)(v.a,{backend:p.a,children:Object(O.jsx)(Ce,{})})},Ce=function(e){var t=Object(o.useState)({x:0,y:0}),n=Object(j.a)(t,2),c=(n[0],n[1]),r=Object(o.useState)({x:0,y:0}),a=Object(j.a)(r,2),i=a[0],s=a[1],u=Object(we.a)((function(e){return e.cards})),l=Object(m.a)({accept:[y,k],drop:function(e,t){var n=t.getDifferenceFromInitialOffset(),c=Math.round(e.x+n.x),r=Math.round(e.y+n.y);return e.type===y?f(e.id,c,r):s({x:c,y:r}),{x:c,y:r}}}),d=Object(j.a)(l,2)[1],b=Object(o.useCallback)((function(e,t){Object(C.a)()}),[]),f=Object(o.useCallback)((function(e,t,n){}),[]);return Object(O.jsxs)("div",{className:"canvas",ref:d,onMouseMove:function(e){c({x:e.nativeEvent.offsetX,y:e.nativeEvent.offsetY})},onDoubleClick:function(e){b(e.nativeEvent.offsetX,e.nativeEvent.offsetY)},children:[!1,Object(O.jsx)(w,{item:{type:k,id:Object(C.a)(),x:i.x,y:i.y},children:Object(O.jsx)(ye,{handleNoteButtonClick:function(e){null===e||void 0===e||e.id}})}),Object.entries(u).map((function(e,t){var n=Object(j.a)(e,2),c=(n[0],n[1]);return Object(O.jsx)(w,{item:c,hideSourceOnDrag:!0,children:Object(O.jsx)(ge,{id:c.id})},t)}))]})},Ne=n(33);n(244);function Re(){var e=Object(o.useState)(!1),t=Object(j.a)(e,2),n=(t[0],t[1]),c=Object(o.useState)(""),r=Object(j.a)(c,2),a=r[0],i=r[1],s=Object(o.useState)([]),u=Object(j.a)(s,2),l=u[0],d=u[1],f=Object(o.useContext)(ve),h=f.items,x=f.addItem,v=Object(b.e)(),m=Object(b.d)(),p="/experiment-501.V2/p",g=function(e){(function(e){return ue.apply(this,arguments)})(e).then((function(e){return d(e)}))};return Object(O.jsxs)("div",{className:"relative shadow-sm",children:[Object(O.jsxs)("div",{className:"h-10 w-72  rounded-full flex justify-between pl-6 items-center relative",children:[Object(O.jsx)("input",{placeholder:"Search",className:"w-3/4 h-full bg-transparent overflow-ellipsis",type:"text",value:a,onChange:function(e){var t=e.target.value;i(t),g(t)},onFocus:function(e){return n(!0)},onBlur:function(e){return n(!1)}}),Object(O.jsx)("button",{className:"h-10 w-10 rounded-full bg-black text-white flex justify-center items-center",children:Object(O.jsx)(Ne.l,{})})]}),""!==a&&l.length>0&&Object(O.jsx)("div",{className:"search-results rounded-b-lg overflow-hidden",children:l.map((function(e){return Object(O.jsx)(Ee,{onResultClick:function(){i(""),x(h,e.item.id),m.pathname!==p&&v(p)},result:e},e.item.id)}))})]})}var Ee=function(e){var t=e.result,n=e.onResultClick,c=t.matches.some((function(e){return"title"===e.key})),r=t.matches.some((function(e){return"text"===e.key}));return Object(O.jsxs)("button",{className:"result bg-white text-left p-2",onClick:function(e){null===n||void 0===n||n()},children:[Object(O.jsxs)("div",{className:"text-sm",children:[c&&t.matches.map((function(e,t){return"title"===e.key?Object(O.jsx)(Se,{match:e},t):null})),!c&&t.item.title]}),Object(O.jsxs)("div",{className:"text-xs font-extralight",children:[r&&t.matches.map((function(e,t){return"text"===e.key?Object(O.jsx)(Se,{match:e},t):null})),!r&&t.item.text]})]})},Se=function(e){var t,n,c,r,a=e.match,i=Object(j.a)(a.indices,1),o=Object(j.a)(i[0],2),s=o[0],u=o[1];return Object(O.jsxs)(O.Fragment,{children:[null===(t=a.value)||void 0===t?void 0:t.substring(0,s),Object(O.jsx)("span",{className:"bg-yellow-300",children:null===(n=a.value)||void 0===n?void 0:n.substring(s,u)}),null===(c=a.value)||void 0===c?void 0:c.substring(u,null===(r=a.value)||void 0===r?void 0:r.length)]})};function Ie(){return Object(O.jsxs)("div",{className:"min-h-screen",children:[Object(O.jsx)("div",{id:"top-bar",className:"flex flex-row-reverse p-8",children:Object(O.jsx)(Re,{})}),Object(O.jsx)(ke,{})]})}function Ae(e){var t=Object(o.useContext)(ve),n=t.items,c=t.addItem,r=Object(o.useCallback)(Object(E.a)(R.a.mark((function e(){var t;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te();case 2:return t=e.sent,c(n,t.id),e.abrupt("return",t.id);case 5:case"end":return e.stop()}}),e)}))),[c,n]);return Object(O.jsx)("button",{onClick:Object(E.a)(R.a.mark((function t(){var n,c;return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r();case 2:c=t.sent,null===e||void 0===e||null===(n=e.handleClick)||void 0===n||n.call(e,c);case 4:case"end":return t.stop()}}),t)}))),className:"rounded-full h-16 w-16 fixed right-8 bottom-8 bg-black text-white flex justify-center items-center shadow-md hover:pointer border-2 border-white",children:Object(O.jsx)(Ne.a,{})})}var De=n(69),Fe=(n(245),function(e){return e?"active":""}),Te=function(){var e=Object(I.e)(),t=Object(I.d)();return Object(O.jsxs)("div",{className:"toolbar space-x-2",children:[Object(O.jsx)("button",{onClick:function(){e.undo(),e.focus()},children:Object(O.jsx)(Ne.f,{})}),Object(O.jsx)("button",{onClick:function(){e.redo(),e.focus()},children:Object(O.jsx)(Ne.k,{})}),Object(O.jsx)("button",{className:Fe(t.bold()),onClick:function(){e.toggleBold(),e.focus()},children:Object(O.jsx)(Ne.b,{})}),Object(O.jsx)("button",{className:Fe(t.italic()),onClick:function(){e.toggleItalic(),e.focus()},children:Object(O.jsx)(Ne.g,{})}),Object(O.jsx)("button",{className:Fe(t.underline()),onClick:function(){e.toggleUnderline(),e.focus()},children:Object(O.jsx)(De.b,{})}),Object(O.jsx)("button",{className:Fe(t.code()),onClick:function(){e.toggleCode(),e.focus()},children:Object(O.jsx)(Ne.e,{})}),Object(O.jsx)("button",{className:Fe(t.blockquote()),onClick:function(){e.toggleBlockquote(),e.focus()},children:Object(O.jsx)(Ne.j,{})}),Object(O.jsx)("button",{className:Fe(t.bulletList()),onClick:function(){e.toggleBulletList(),e.focus()},children:Object(O.jsx)(Ne.i,{})}),Object(O.jsx)("button",{className:Fe(t.taskList()),onClick:function(){e.toggleTaskList(),e.focus()},children:Object(O.jsx)(Ne.c,{})})]})};n(246);function qe(){var e=Object(o.useContext)(ve).items,t=Object(o.useState)(),n=Object(j.a)(t,2),c=n[0],r=n[1],a=Object(b.e)();return Object(o.useEffect)((function(){0===e.length&&a("/experiment-501.V2")}),[e]),Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("div",{className:"editor-list",children:e.map((function(e){return Object(O.jsx)(ge,{id:e,handleFocus:function(e){return r(e)}},e)}))}),c&&Object(O.jsx)(I.c.Provider,{value:c,children:Object(O.jsx)(Te,{})}),Object(O.jsx)(Ae,{})]})}n(247);var Me=function(){var e=Object(b.e)();return Object(O.jsx)("button",{onClick:function(){return e("/experiment-501.V2/settings")},className:"rounded-full h-16 w-16 fixed left-8 bottom-8 hover:bg-black hover:text-white flex justify-center items-center shadow-md hover:pointer",children:Object(O.jsx)(De.a,{})})};function Be(){var e=Object(o.useState)([]),t=Object(j.a)(e,2),n=t[0],c=t[1],r=Object(o.useState)(!1),a=Object(j.a)(r,2),i=a[0],s=a[1],u=Object(o.useState)(),l=Object(j.a)(u,2),d=l[0],f=l[1],h=Object(b.e)(),x=Object(o.useContext)(ve),v=x.items,m=x.addItem,p=Object(o.useCallback)(Object(E.a)(R.a.mark((function e(){var t;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re();case 2:t=e.sent,c(t);case 4:case"end":return e.stop()}}),e)}))),[c]);return Object(o.useEffect)((function(){return p(),se(p),function(){c([])}}),[p]),Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("div",{className:"p-5",children:[Object(O.jsxs)("table",{className:"rounded-lg divide-y divide-gray-200 note-list shadow-md",children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{className:"w-11/12 lg:w-9/12",children:"Note"}),Object(O.jsx)("th",{className:"hidden lg:block w-2/12",children:"Edited"}),Object(O.jsx)("th",{className:"w-1/12"})]})}),Object(O.jsx)("tbody",{children:n.sort((function(e,t){return e.lastEditedTime<t.lastEditedTime?1:-1})).map((function(e,t){return Object(O.jsxs)("tr",{id:"row-".concat(e.id),children:[Object(O.jsx)("td",{children:Object(O.jsx)("button",{className:"truncate w-full transition duration-250 ease-in-out bg-gradient-to-r hover:from-gray-100 hover:to-gray-200",onClick:function(){m(v,e.id),h("/experiment-501.V2/p#".concat(e.id))},children:Object(O.jsxs)("div",{className:"flex flex-col text-left",children:[Object(O.jsxs)("div",{className:"font-medium flex space-x-1",children:[Object(O.jsx)("span",{children:e.title||"No Title"}),Object(O.jsx)("span",{className:"rounded-full h-2 w-2 bg-green-500 ".concat(v.find((function(t){return t==e.id}))?"inline":"hidden"," ")})]}),Object(O.jsx)("span",{className:"text-sm text-gray-500 font-light",children:e.text||"empty"})]})})}),Object(O.jsx)("td",{className:"hidden md:block",children:new Date(e.lastEditedTime).toLocaleString()}),Object(O.jsx)("td",{children:Object(O.jsx)("button",{onClick:function(){return function(e){f(e),s(!0)}(e)},children:Object(O.jsx)(Ne.h,{})})})]},t)}))})]}),Object(O.jsx)(Me,{}),Object(O.jsx)(Ae,{handleClick:function(e){return h("/experiment-501.V2/p#".concat(e))}})]}),Object(O.jsx)(pe,{isOpen:i,note:d,onRequestClose:function(){f(null),s(!1)}})]})}var Le=n(119),_e=n.n(Le);J.a.plugin(X.a);var Ve,We,Pe,Ue=new J.a("peers");function He(){return(He=Object(E.a)(R.a.mark((function e(t){var n,c;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.id||t._id,e.next=4,Ue.upsert(n,(function(e){return t}));case 4:return c=e.sent,e.abrupt("return",c);case 8:e.prev=8,e.t0=e.catch(0),console.log("ERROR: couldn't upsert \n".concat(e.t0));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function Ge(){return Qe.apply(this,arguments)}function Qe(){return(Qe=Object(E.a)(R.a.mark((function e(){var t,n;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ue.allDocs({include_docs:!0});case 3:return n=e.sent,e.abrupt("return",null===n||void 0===n||null===(t=n.rows)||void 0===t?void 0:t.map((function(e){return e.doc})));case 7:e.prev=7,e.t0=e.catch(0),console.log("ERROR fetching all peers \n".concat(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}Ve=localStorage.getItem("peerId");try{We=new _e.a(Ve)}catch(Ot){Ve=(We=new _e.a).id}We.on("open",(function(e){localStorage.setItem("peerId",e),console.log("My peer ID is: "+e)})),We.on("connection",(function(e){console.log("Connected to ".concat(e.peer)),Object.keys(We.connections).forEach((function(e){Je(e)})),(e=e).on("open",(function(){e.on("data",(function(t){console.log("Recieved data from ".concat(e.peer)),console.log(t),Array.isArray(t)&&t.forEach((function(e){return Z(e)}))}))}))})),We.on("error",(function(e){console.error(e)}));var Je=function(e){!function(e){He.apply(this,arguments)}({id:e})};function ze(e){try{Pe=We.connect(e,{serialization:"json"}),Object.keys(We.connections).forEach((function(e){Je(e)}))}catch(t){console.log(t)}}function Xe(){return Ye.apply(this,arguments)}function Ye(){return(Ye=Object(E.a)(R.a.mark((function e(){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{Pe.on("open",Object(E.a)(R.a.mark((function e(){var t;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re();case 2:t=e.sent,Pe.send(t),console.log("data sent");case 5:case"end":return e.stop()}}),e)}))))}catch(t){console.log(t)}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ke=n(58),$e=n.n(Ke),Ze=n(98),et=n.n(Ze),tt=function(){var e=Object(o.useState)([]),t=Object(j.a)(e,2),n=t[0],c=t[1];return Object(o.useEffect)((function(){var e;return Ge().then((function(e){return c(e)})),e=function(e){return Ge().then((function(e){return c(e)}))},Ue.changes({since:"now",live:!0}).on("change",(function(){return e()})),function(){c([])}}),[]),Object(O.jsx)("div",{className:"flex space-x-2",children:null===n||void 0===n?void 0:n.map((function(e,t){return Object(O.jsx)("button",{className:"rounded-3xl shadow-lg bg-black text-white h-10 w-10 flex flex-col justify-center items-center overflow-hidden ",children:Object(O.jsx)(Ne.m,{})},t)}))})};function nt(){var e,t,n=Object(o.useState)(""),c=Object(j.a)(n,2),r=c[0],a=c[1],i=Object(o.useState)(),s=Object(j.a)(i,2),u=(s[0],s[1]);Object(o.useEffect)((function(){var e=document.getElementById("qrcode");null===$e.a||void 0===$e.a||$e.a.toCanvas(e,localStorage.getItem("peerId")),t=document.getElementById("videoOutCanvas")}),[]);return requestAnimationFrame((function n(){if(e&&e.readyState===e.HAVE_ENOUGH_DATA){var c=t.getContext("2d");t.height=e.videoHeight,t.width=e.videoWidth,c.drawImage(e,0,0,t.width,t.height);var r=c.getImageData(0,0,t.width,t.height),i=et()(r.data,r.width,r.height,{inversionAttempts:"dontInvert"});i&&(console.log("Got QR Code"),console.log(i.data),a(i.data))}requestAnimationFrame(n)})),Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("div",{className:"flex",children:[Object(O.jsxs)("div",{className:"flex flex-col",children:[Object(O.jsx)("input",{className:"border border-black",type:"text",value:r,onChange:function(e){a(e.target.value)}}),Object(O.jsx)("button",{className:"rounded bg-blue-500 text-white",onClick:function(e){ze(r)},children:"Connect"})]}),Object(O.jsxs)("div",{className:"flex flex-col",children:[Object(O.jsx)("textarea",{className:"border border-black",onChange:function(e){u(e.target.value)}}),Object(O.jsx)("button",{className:"bg-green-500 text-white rounded",onClick:function(e){Xe()},children:"Send"})]})]}),Object(O.jsx)(tt,{}),Object(O.jsx)("canvas",{id:"videoOutCanvas",hidden:!0}),Object(O.jsx)("video",{id:"video"})]})}var ct={content:{borderRadius:".5rem",height:"fit-content",maxWidth:"40rem",marginLeft:"auto",marginRight:"auto"}};je.a.setAppElement("#root");var rt=function(e){var t=Object(o.useState)(),n=Object(j.a)(t,2),c=n[0],r=n[1],a=Object(o.useState)(null),i=Object(j.a)(a,2),s=i[0],u=i[1],l=Object(o.useCallback)((function(e){null!==e&&u(e)}),[]);return Object(o.useEffect)((function(){var e=localStorage.getItem("peerId");r(e)}),[]),Object(o.useEffect)((function(){s&&(null===$e.a||void 0===$e.a||$e.a.toCanvas(s,c))}),[c,s]),Object(O.jsx)(je.a,{isOpen:e.isOpen,onAfterClose:e.onAfterOpen,onRequestClose:e.onRequestClose,style:ct,children:Object(O.jsxs)("div",{className:"flex flex-col justify-center items-center",children:[Object(O.jsx)("canvas",{id:"qrcode",ref:l}),Object(O.jsx)("p",{className:"text-center",children:c})]})})},at=n(147),it={content:{borderRadius:".5rem",height:"fit-content",maxWidth:"40rem",marginLeft:"auto",marginRight:"auto"}};je.a.setAppElement("#root");var ot=function(e){var t=Object(o.useState)(null),n=Object(j.a)(t,2),c=n[0],r=n[1],a=Object(o.useState)(null),i=Object(j.a)(a,2),s=i[0],u=i[1],l=Object(o.useState)(""),d=Object(j.a)(l,2),b=(d[0],d[1]),f=Object(o.useState)(),h=Object(j.a)(f,2),x=h[0],v=h[1],m=Object(o.useCallback)((function(e){null!==e&&r(e)}),[]),p=Object(o.useCallback)((function(e){null!==e&&u(e)}),[]);Object(o.useEffect)((function(){try{navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",frameRate:{ideal:10,max:15}}}).then((function(e){v(e),s&&(s.srcObject=e,s.setAttribute("playsinline","true"),s.play(),requestAnimationFrame(g))}))}catch(e){console.log("Couldn't set up video stream \n:".concat(e))}return function(){g=null,null===x||void 0===x||x.getTracks().forEach((function(e){e.stop()}))}}),[s]),Object(o.useEffect)((function(){!e.isOpen&&(null===x||void 0===x?void 0:x.active)&&x.getTracks().forEach((function(e){e.stop()}))}),[e.isOpen,x]);var g=function(){if(s&&s.readyState===s.HAVE_ENOUGH_DATA){var t=c.getContext("2d");c.height=s.videoHeight,c.width=s.videoWidth,t.drawImage(s,0,0,c.width,c.height);var n=t.getImageData(0,0,c.width,c.height),r=et()(n.data,n.width,n.height,{inversionAttempts:"dontInvert"});(null===r||void 0===r?void 0:r.data)&&(console.log("Got QR Code"),console.log(r.data),b(r.data),null===e||void 0===e||e.onScanned(r.data),g=null)}g&&requestAnimationFrame(g)};return Object(O.jsxs)(je.a,{isOpen:e.isOpen,onAfterClose:e.onAfterOpen,onRequestClose:e.onRequestClose,style:it,children:[Object(O.jsx)("canvas",{id:"videoOutCanvas",ref:m,hidden:!0}),Object(O.jsx)("video",{id:"video",ref:p})]})},st=function(){var e=Object(o.useState)(!1),t=Object(j.a)(e,2),n=t[0],c=t[1],r=Object(o.useState)(!1),a=Object(j.a)(r,2),i=a[0],s=a[1];return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("div",{className:"p-5",children:Object(O.jsxs)("div",{className:"flex flex-col items-center",children:[Object(O.jsx)("h1",{children:"Connected Devices"}),Object(O.jsx)(tt,{}),Object(O.jsx)("h1",{children:"Add Devices"}),Object(O.jsxs)("div",{className:"flex items-center justify-center w-full flex-wrap md:space-x-4",children:[Object(O.jsxs)("button",{className:"rounded-3xl bg-black text-white flex space-x-1 p-2 items-center justify-center w-full md:w-1/3 mb-2",onClick:function(){return c(!0)},children:[Object(O.jsx)(at.a,{})," ",Object(O.jsx)("span",{children:"Show QR Code"})]}),Object(O.jsxs)("button",{className:"rounded-3xl bg-black text-white flex space-x-1 p-2 items-center justify-center w-full md:w-1/3 mb-2",onClick:function(){return s(!0)},children:[Object(O.jsx)(De.c,{})," ",Object(O.jsx)("span",{children:"Scan"})]})]})]})}),Object(O.jsx)(rt,{isOpen:n,onRequestClose:function(){return c(!1)}}),Object(O.jsx)(ot,{isOpen:i,onRequestClose:function(){return s(!1)},onScanned:function(){var e=Object(E.a)(R.a.mark((function e(t){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ze(t),e.next=3,Xe();case 3:s(!1);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})]})},ut=function(){var e=Object(b.e)();return Object(O.jsx)("button",{className:"h-8 w-8 hover:bg-black hover:text-white rounded-full flex justify-center items-center",onClick:function(){return e(-1)},children:Object(O.jsx)(Ne.d,{})})},lt=function(e){return Object(O.jsxs)("div",{className:"min-h-screen max-w-full",children:[Object(O.jsxs)("div",{className:"w-full flex justify-between items-center mb-2 p-2",children:[Object(O.jsx)(ut,{}),Object(O.jsx)("div",{className:"hidden md:inline-block",children:Object(O.jsx)(Re,{})})]}),e.children]})};function dt(e){return Object(O.jsxs)(x,{children:[Object(O.jsx)(b.b,{from:"/",to:"experiment-501.V2",noThrow:!0}),Object(O.jsxs)(lt,{path:"/experiment-501.V2",children:[Object(O.jsx)(Ie,{path:"/c"}),Object(O.jsx)(qe,{path:"/p"}),Object(O.jsx)(Be,{path:"/"}),Object(O.jsx)(st,{path:"/settings"}),Object(O.jsx)(nt,{path:"/demo"})]})]})}n(273);var jt=function(){var e=Object(o.useState)({items:[],addItem:function(e,t){e.find((function(e){return e===t}))||c(Object(d.a)(Object(d.a)({},n),{},{items:Oe(e,t)}))},removeItem:function(e,t){c(Object(d.a)(Object(d.a)({},n),{},{items:he(e,t)}))}}),t=Object(j.a)(e,2),n=t[0],c=t[1],r=Object(o.useMemo)((function(){return n}),[n]);return Object(O.jsx)("div",{className:"App",children:Object(O.jsx)(ve.Provider,{value:r,children:Object(O.jsx)(dt,{})})})},bt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,288)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),c(e),r(e),a(e),i(e)}))},ft=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ht(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}l.a.render(Object(O.jsx)(s.a.StrictMode,{children:Object(O.jsx)(jt,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/experiment-501.V2",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/experiment-501.V2","/service-worker.js");ft?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var c=n.headers.get("content-type");404===n.status||null!=c&&-1===c.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ht(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):ht(t,e)}))}}(),bt()}},[[274,1,2]]]);
//# sourceMappingURL=main.ed9ea394.chunk.js.map